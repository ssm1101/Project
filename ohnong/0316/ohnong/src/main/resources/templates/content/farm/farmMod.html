<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/layoutMagement}">
<head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
<meta charset="UTF-8">
<title>oh-nong!</title>
<style>
.left-box {
  float: left;
  width: 50%;
}
.right-box {
  float: right;
  width: 50%;
}
.form-control {
   width: 170%
}
</style>
</head>
</th:block>
<th:block layout:fragment="script">
</th:block>
<div layout:fragment="contentMagement">

    <div class="right_col" role="main">
        <div class="">
            <div class="page-title">
                <div class="title_left">
                </div>
            </div>

            <div class="clearfix"></div>

            <div class="row">
                <div class="col-md-12 col-sm-12 ">
                <h3 style="text-align:left"><b>üèï ÎÜçÍ∞Ä ÏàòÏ†ï</b></h3>
                    <div class="x_panel">
                        <div class="x_title">
                            <ul class="nav navbar-right panel_toolbox">
                                <li><a class="collapse-link"><i
                                        class="fa fa-chevron-up"></i></a></li>
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown" role="button" aria-expanded="false"><i
                                        class="fa fa-wrench"></i></a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item" href="#">Settings 1</a> <a
                                            class="dropdown-item" href="#">Settings 2</a>
                                    </div></li>
                                <li><a class="close-link"><i class="fa fa-close"></i></a></li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div class="col-md-9 col-sm-9 ">
                                <form name="form" th:role="form" th:action="@{farmMod}" method="POST" style="width:120%">
                                <!-- ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî -->
                                    <input type="hidden" id="userId" name="userId"
                                    class="form-control " th:value="${session.login.userId}">
                                <!-- ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî ÏïÑÏù¥Îîî -->
                                    <table>
                                        <tbody>
                                            <tr th:each="farmInfo : ${farmInfo}">
                                            <div class='left-box'>
                                            <div style="margin: 0 70px;"><h5><b>‚úÖÌïÑÏàò ÏûÖÎ†•ÎûÄ</b></h5></div>
                                            <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÎÜçÍ∞ÄÎ™Ö</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control"
                                                            th:value="${farmInfo.farmName}" id="farmName" name="farmName" />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÎåÄÌëúÎ™Ö</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control"
                                                            th:value="${farmInfo.farmCeo}" id="farmCeo" name="farmCeo" />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÏßÄÏó≠</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6 ">
                                                    <input class="form-control optional" type="hidden"
                                                            th:value="${farmInfo.farmAddr}" id="farmAddr" name="farmAddr" />
                                                <input type="radio" name="radio" id="r1" value="ÎåÄÍµ¨">ÎåÄÍµ¨
                                                <input type="radio" name="radio" id="r2" value="Í≤ΩÎ∂Å">Í≤ΩÎ∂Å
                                                &nbsp;
                                                    <span id="spanId">
                                                    <select id="farmAddr1" th:onchange="changeSelect()" style="height: 37px">
                                                        <option value="">ÏßÄÏó≠ ÏÑ†ÌÉù</option>
                                                        <option th:value="ÎåÄÍµ¨-Î∂ÅÍµ¨" th:selected="'ÎåÄÍµ¨-Î∂ÅÍµ¨' == ${farmInfo.farmAddr}">Î∂ÅÍµ¨</option>
                                                        <option th:value="ÎåÄÍµ¨-ÎèôÍµ¨" th:selected="'ÎåÄÍµ¨-ÎèôÍµ¨' == ${farmInfo.farmAddr}">ÎèôÍµ¨</option>
                                                        <option th:value="ÎåÄÍµ¨-Ï§ëÍµ¨" th:selected="'ÎåÄÍµ¨-Ï§ëÍµ¨' == ${farmInfo.farmAddr}">Ï§ëÍµ¨</option>
                                                        <option th:value="ÎåÄÍµ¨-ÏÑúÍµ¨" th:selected="'ÎåÄÍµ¨-ÏÑúÍµ¨' == ${farmInfo.farmAddr}">ÏÑúÍµ¨</option>
                                                        <option th:value="ÎåÄÍµ¨-Îã¨ÏÑúÍµ¨" th:selected="'ÎåÄÍµ¨-Îã¨ÏÑúÍµ¨' == ${farmInfo.farmAddr}">Îã¨ÏÑúÍµ¨</option>
                                                        <option th:value="ÎåÄÍµ¨-ÏàòÏÑ±Íµ¨" th:selected="'ÎåÄÍµ¨-ÏàòÏÑ±Íµ¨' == ${farmInfo.farmAddr}">ÏàòÏÑ±Íµ¨</option>
                                                        <option th:value="ÎåÄÍµ¨-ÎÇ®Íµ¨" th:selected="'ÎåÄÍµ¨-ÎÇ®Íµ¨' == ${farmInfo.farmAddr}">ÎÇ®Íµ¨</option>
                                                        <option th:value="ÎåÄÍµ¨-Îã¨ÏÑ±Íµ∞" th:selected="'ÎåÄÍµ¨-Îã¨ÏÑ±Íµ∞' == ${farmInfo.farmAddr}">Îã¨ÏÑ±Íµ∞</option>
                                                    </select>
                                                    </span>
                                                    <span id="spanId2">
                                                    <select id="farmAddr2" th:onchange="changeSelect()" style="height: 37px">
                                                        <option value="">ÏßÄÏó≠ ÏÑ†ÌÉù</option>
                                                        <option th:value="Í≤ΩÎ∂Å-Ìè¨Ìï≠Ïãú" th:selected="'Í≤ΩÎ∂Å-Ìè¨Ìï≠Ïãú' == ${farmInfo.farmAddr}">Ìè¨Ìï≠Ïãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-Í≤ΩÏ£ºÏãú" th:selected="'Í≤ΩÎ∂Å-Í≤ΩÏ£ºÏãú' == ${farmInfo.farmAddr}">Í≤ΩÏ£ºÏãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-ÏïàÎèôÏãú" th:selected="'Í≤ΩÎ∂Å-ÏïàÎèôÏãú' == ${farmInfo.farmAddr}">ÏïàÎèôÏãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-ÍπÄÏ≤úÏãú" th:selected="'Í≤ΩÎ∂Å-ÍπÄÏ≤úÏãú' == ${farmInfo.farmAddr}">ÍπÄÏ≤úÏãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-Íµ¨ÎØ∏Ïãú" th:selected="'Í≤ΩÎ∂Å-Íµ¨ÎØ∏Ïãú' == ${farmInfo.farmAddr}">Íµ¨ÎØ∏Ïãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-ÏòÅÏ£ºÏãú" th:selected="'Í≤ΩÎ∂Å-ÏòÅÏ£ºÏãú' == ${farmInfo.farmAddr}">ÏòÅÏ£ºÏãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-ÏòÅÏ≤úÏãú" th:selected="'Í≤ΩÎ∂Å-ÏòÅÏ≤úÏãú' == ${farmInfo.farmAddr}">ÏòÅÏ≤úÏãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-ÏÉÅÏ£ºÏãú" th:selected="'Í≤ΩÎ∂Å-ÏÉÅÏ£ºÏãú' == ${farmInfo.farmAddr}">ÏÉÅÏ£ºÏãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-Î¨∏Í≤ΩÏãú" th:selected="'Í≤ΩÎ∂Å-Î¨∏Í≤ΩÏãú' == ${farmInfo.farmAddr}">Î¨∏Í≤ΩÏãú</option>
                                                        <option th:value="Í≤ΩÎ∂Å-Í≤ΩÏÇ∞Ïãú" th:selected="'Í≤ΩÎ∂Å-Í≤ΩÏÇ∞Ïãú' == ${farmInfo.farmAddr}">Í≤ΩÏÇ∞Ïãú</option>
                                                    </select>
                                                    </span>
                                                </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>Ïû¨Î∞∞Î©¥Ï†Å(Ìèâ)</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control" type="text"
                                                            th:value="${farmInfo.plantArea}" id="plantArea" name="plantArea" />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÎåÄÌëú ÏûëÎ¨º</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-2 col-sm-6">
	                                                   <select name="middlecatagori" style="height: 37px">
	                                                        <option value="">Î∂ÑÎ•ò ÏÑ†ÌÉù</option>
	                                                        <option th:value="Í≥°Î•ò" th:selected="'Í≥°Î•ò' == ${farmInfo.middlecatagori}">Í≥°Î•ò</option>
	                                                        <option th:value="ÏΩ©Î•ò" th:selected="'ÏΩ©Î•ò' == ${farmInfo.middlecatagori}">ÏΩ©Î•ò</option>
	                                                        <option th:value="Íµ¨Í∑ºÎ•ò" th:selected="'Íµ¨Í∑ºÎ•ò' == ${farmInfo.middlecatagori}">Íµ¨Í∑ºÎ•ò</option>
	                                                        <option th:value="Ï±ÑÏÜåÎ•ò" th:selected="'Ï±ÑÏÜåÎ•ò' == ${farmInfo.middlecatagori}">Ï±ÑÏÜåÎ•ò</option>
	                                                        <option th:value="Í≥ºÏã§Î•ò" th:selected="'Í≥ºÏã§Î•ò' == ${farmInfo.middlecatagori}">Í≥ºÏã§Î•ò</option>
	                                                        <option th:value="Ï¢ÖÏã§Î•ò" th:selected="'Ï¢ÖÏã§Î•ò' == ${farmInfo.middlecatagori}">Ï¢ÖÏã§Î•ò</option>
	                                                        <option th:value="Î≤ÑÏÑØÎ•ò" th:selected="'Î≤ÑÏÑØÎ•ò' ==  ${farmInfo.middlecatagori}">Î≤ÑÏÑØÎ•ò</option>
	                                                    </select>
	                                                 </div>
	                                                 <div>
                                                        <input class="form-control" style="width: 465px"
                                                            th:value="${farmInfo.subdivision}" id="subdivision" name="subdivision" />
                                                     </div>
                                                </div>
                                                </div>
                                                <div class="right-box">
                                                <div style="margin: 0 90px;"><h5><b>‚úÖÏÑ†ÌÉù ÏûÖÎ†•ÎûÄ</b></h5></div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>ÏÉÅÏÑ∏Ï£ºÏÜå</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control" type="text"
                                                            th:value="${farmInfo.farmDetailaddr}" name="farmDetailaddr" id="farmDetailaddr" />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>ÌôàÌéòÏù¥ÏßÄ</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control" type="email"
                                                            th:value="${farmInfo.homepage}" name="homepage" id="homepage" />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>ÏÇ¨ÏóÖÏûêÎ≤àÌò∏</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control" type="text"
                                                            th:value="${farmInfo.registNum}" name="registNum" id="registNum" />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>Î©îÎ™®</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <textarea class="form-control"
                                                            th:text="${farmInfo.memo}" style="height:103px" name="memo" id="memo"></textarea>
                                                    </div>
                                                </div>
                                                </div>
                                            </tr>
                                        <tbody>
                                    </table>
                                <button id="submit" type='submit' class="btn btn-primary" style="position:relative; bottom:-10px; left: 670px"><b>ÏàòÏ†ïÌïòÍ∏∞</b></button>
                        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
                        <script>
                        var userId = $('#userId').val();
                        
                        $(document).ready(function(e) {
                        	// ÏßÄÏó≠
                        	var farmAddr = $('#farmAddr').val().substr(0,2);
                            console.log(farmAddr);
                            if (farmAddr == "ÎåÄÍµ¨") {
                            	$('#r1').prop('checked', true);
                            	$('#spanId').show();
                                $('#spanId2').hide();
                            	
                            } else if (farmAddr == "Í≤ΩÎ∂Å") {
                            	$('#r2').prop('checked', true);
                            	$('#spanId').hide();
                                $('#spanId2').show();
                            }
                        	
                            $("input:radio[name=radio]").click(function(){
                                if($("input[name=radio]:checked").val() == "ÎåÄÍµ¨"){
                                    $('#spanId').show();
                                    $('#spanId2').hide();
                                }
                                if($("input[name=radio]:checked").val() == "Í≤ΩÎ∂Å"){
                                    $('#spanId').hide();
                                    $('#spanId2').show();
                                }
                            })
                            
                            // Ïû¨Î∞∞ Î©¥Ï†Å
                            const input = document.querySelector('#plantArea');
                            
                            input.addEventListener('keyup', function(e) {
                              let value = e.target.value;
                              value = Number(value.replaceAll(',', ''));
                              if(isNaN(value)) {
                                input.value = 0;
                              } else {
                                const formatValue = value.toLocaleString('ko-KR');
                                input.value = formatValue;
                              }
                            })
                            
                            // Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
                            $('#submit').click(function(e) {
                            	if($('#farmName').val() == '' || $('#farmCeo').val() == ''
                                    || $('#farmAddr').val() == '' || $('#plantArea').val() == '' 
                                    || $('#middlecatagori').val() == '' || $('#subdivision').val() == '') {
                            		const Toast = Swal.mixin({
                                        toast: true,
                                        position: 'center-center',
                                        showConfirmButton: false,
                                        timer: 2000,
                                        timerProgressBar: true,
                                        didOpen: (toast) => {
                                          toast.addEventListener('mouseenter', Swal.stopTimer)
                                          toast.addEventListener('mouseleave', Swal.resumeTimer)
                                        }
                                      })

                                      Toast.fire({
                                        icon: 'info',
                                        title: 'ÏûÖÎ†•Í∞íÏùÑ Î™®Îëê Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî.'
                                      })
                                        return false;
                                }
                            })
                        })
                        
                        function changeSelect() {
                        	var selectvalue = "";
                        	
                        	if($("input[name=radio]:checked").val() == "ÎåÄÍµ¨") {
                        		selectvalue = $('#farmAddr1').val();
                        	} else {
                        		selectvalue = $('#farmAddr2').val();
                        	}
                        	$('#farmAddr').val(selectvalue);
                        }
                        </script>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</html>