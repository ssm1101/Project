<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/layoutMagement}">
<head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
<meta charset="UTF-8">
<title>oh-nong!</title>
<style>
.left-box {
  float: left;
  width: 50%;
}
.right-box {
  float: right;
  width: 50%;
}
.form-control {
   width: 170%
}
</style>
</head>
</th:block>
<th:block layout:fragment="script">
</th:block>
<div layout:fragment="contentMagement">

    <div class="right_col" role="main">
        <div class="">
            <div class="page-title">
                <div class="title_left">
                </div>
            </div>

            <div class="clearfix"></div>

            <div class="row">
                <div class="col-md-12 col-sm-12 ">
                <h3 style="text-align:left"><b>üìó ÎÜçÍ∞Ä Ï†ïÎ≥¥</b></h3>
                    <div class="x_panel">
                        <div class="x_title">
                            <ul class="nav navbar-right panel_toolbox">
                                <li><a class="collapse-link"><i
                                        class="fa fa-chevron-up"></i></a></li>
                                <li class="dropdown"><a href="#" class="dropdown-toggle"
                                    data-toggle="dropdown" role="button" aria-expanded="false"><i
                                        class="fa fa-wrench"></i></a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item" href="#">Settings 1</a> <a
                                            class="dropdown-item" href="#">Settings 2</a>
                                    </div></li>
                                <li><a class="close-link"><i class="fa fa-close"></i></a></li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div class="col-md-9 col-sm-9 ">
                                <form class="" action="" method="" style="width:120%">
                                    <table>
                                        <tbody>
                                            <tr th:each="farmInfo : ${farmInfo}">
                                            <div class='left-box'>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÎÜçÍ∞ÄÎ™Ö</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control"
                                                            th:value="${farmInfo.farmName}" readonly />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÎåÄÌëúÎ™Ö</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control"
                                                            th:value="${farmInfo.farmCeo}" readonly />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÏßÄÏó≠</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control optional"
                                                            th:value="${farmInfo.farmAddr}" readonly />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>Ïû¨Î∞∞Î©¥Ï†Å(Ìèâ)</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control"
                                                            th:value="${farmInfo.plantArea}" readonly />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><span style="color:red; font-size: 15px;">‚úî</span><b>ÎåÄÌëú ÏûëÎ¨º</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control"
                                                            th:value="${farmInfo.subdivision}" readonly />
                                                    </div>
                                                </div>
                                                </div>
                                                <div class="right-box">
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>ÏÉÅÏÑ∏Ï£ºÏÜå</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control" type="text"
                                                            th:value="${farmInfo.farmDetailaddr}" readonly />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>ÌôàÌéòÏù¥ÏßÄ</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control" type="text"
                                                            th:value="${farmInfo.homepage}" readonly />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>ÏÇ¨ÏóÖÏûêÎ≤àÌò∏</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <input class="form-control" type="text"
                                                            th:value="${farmInfo.registNum}" readonly />
                                                    </div>
                                                </div>
                                                <br>
                                                <div class="field item form-group">
                                                    <label class="col-form-label col-md-3 col-sm-3 label-align"><b>Î©îÎ™®</b><span
                                                        class="required">*</span></label>
                                                    <div class="col-md-6 col-sm-6">
                                                        <textarea class="form-control" type="text"
                                                            th:text="${farmInfo.memo}" style="height:105px" readonly></textarea>
                                                    </div>
                                                </div>
                                                </div>
                                            </tr>
                                        <tbody>
                                    </table>
                                    
                                	<a class="btn btn-success" th:href="@{'/farmMod?userId='+ ${session.login.userId}}" style="position:relative; bottom:-10px; left:530px"><i class="fa fa-edit m-right-xs"></i><b>Ï†ïÎ≥¥ ÏàòÏ†ï</b></a>
                                	<a class="btn btn-danger" type="button" th:id="deleteBtn+${session.login.userId}" th:onclick="deleteBtn([[${session.login.userId}]])" style="position:relative; bottom:-10px; left:530px; color:white"><i class="fa fa-ban"></i><b>ÎÜçÍ∞Ä ÌÉàÌá¥</b></a>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
 	// ÏÇ≠Ï†ú
	function deleteBtn(userId) {
		let deleteBtn = document.getElementById('deleteBtn' + userId);
		let delTrTag = deleteBtn.parentElement.parentElement;

		Swal.fire({
            title: 'ÎÜçÍ∞Ä ÌÉàÌá¥Î•º ÌïòÏãúÍ≤†ÏäµÎãàÍπå?',
            text: "Îã§Ïãú ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§. Ïã†Ï§ëÌïòÏÑ∏Ïöî.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'ÌÉàÌá¥',
            cancelButtonText: 'Ï∑®ÏÜå'
        }).then((result) => {
            if (result.isConfirmed) {
                
                $.ajax({
                    type : 'get',
                    url : "/ohnong/farmDelete/" + userId,
                    dataType : 'text',
                    success : function(data) {
                        console.log(data);
                        if(data == 'success') {
                        const Toast = Swal.mixin({
                            toast: true,
                            position: 'center-center',
                            showConfirmButton: false,
                            timer: 3000,
                            timerProgressBar: true,
                            didOpen: (toast) => {
                              toast.addEventListener('mouseenter', Swal.stopTimer)
                              toast.addEventListener('mouseleave', Swal.resumeTimer)
                            }
                          })
                          Toast.fire({
                            icon: 'success',
                            title: 'ÎÜçÍ∞Ä ÌÉàÌá¥ Ï≤òÎ¶¨Í∞Ä ÎêòÏóàÏäµÎãàÎã§. Îã§Ïùå Î°úÍ∑∏Ïù∏ Ïãú ÎÜçÍ∞Ä Í¥ÄÎ¶¨ ÏãúÏä§ÌÖúÏùÑ Ïù¥Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§.'
                          })
                        } else if(data = 'fail') {
                            alert("Îã§Ïãú ÏãúÎèÑ Î∞îÎûçÎãàÎã§.")
                        }
                    },
                    error : function(status, error) {
                        console.log(status, error);
                    }
                })
            }
        })
        
        setTimeout(function(){window.location.replace('/ohnong/main')}, 4000);
       
    }
    </script>
</div>
</html>